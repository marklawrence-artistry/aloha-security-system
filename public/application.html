<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application | Aloha Security</title>
    
    <link rel="icon" type="image/png" href="uploads/logo.png"/>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <!-- APPLICATION SPECIFIC STYLES -->
    <link rel="stylesheet" href="css/application.css">
</head>
<body>

    <!-- Header Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top scrolled-always">
        <div class="container">
            
            <!-- BRAND LOGO WRAPPER -->
            <div class="brand-interaction-wrapper">
                <a class="navbar-brand position-relative z-3" href="index.html">
                    <img src="resources/logo.png" style="height: 50px;">
                </a>
                <!-- Hidden Hover Modal -->
                <div class="brand-hover-modal">
                    <div class="modal-backdrop-blur"></div>
                    <div class="modal-content-box">
                        <div class="modal-logo-wrapper mb-3">
                            <img src="resources/logo.png" alt="Aloha Logo" class="modal-big-logo">
                            <div class="logo-glow"></div>
                        </div>
                        <h1 class="modal-brand-name">ALOHA</h1>
                        <div class="red-line-divider"></div>
                        <h5 class="modal-brand-sub">SECURITY AGENCY</h5>
                        <p class="modal-tagline">Professional • Reliable • Secure</p>
                    </div>
                </div>
            </div>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
                <span class="toggler-icon"></span>
                <span class="toggler-icon"></span>
                <span class="toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="mainNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#services">Services</a></li>
                    <li class="nav-item"><a class="nav-link" href="status-result.html">Check Status</a></li>
                    <li class="nav-item ms-lg-3">
                        <span class="badge bg-danger rounded-pill px-3 py-2">Apply Now</span>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Wrapper -->
    <main class="application-wrapper">
        <div class="app-bg-shape"></div>

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    
                    <div class="app-card shadow-lg">
                        
                        <div class="text-center mb-5">
                            <h2 class="fw-black">Join Our Team</h2>
                            <div class="red-dash mx-auto"></div>
                            <p class="text-muted">Step <span id="current-step-label" class="fw-bold text-danger">1</span> of 4</p>
                        </div>

                        <!-- Progress Bar & Stepper -->
                        <div class="progress-container mb-5">
                            <div class="top-progress-strip">
                                <div class="top-progress-fill" id="top-progress-bar"></div>
                            </div>
                            
                            <!-- Visual Stepper with Checkmarks -->
                            <div class="stepper">
                                <div class="stepper-progress-line" id="stepper-line-fill"></div>

                                <div class="step active" id="step-ind-1">
                                    <div class="step-circle">
                                        <span>1</span><i class="bi bi-check-lg"></i>
                                    </div>
                                    <span class="step-text">Info</span>
                                </div>
                                
                                <div class="step" id="step-ind-2">
                                    <div class="step-circle">
                                        <span>2</span><i class="bi bi-check-lg"></i>
                                    </div>
                                    <span class="step-text">Job</span>
                                </div>
                                
                                <div class="step" id="step-ind-3">
                                    <div class="step-circle">
                                        <span>3</span><i class="bi bi-check-lg"></i>
                                    </div>
                                    <span class="step-text">Docs</span>
                                </div>
                                
                                <div class="step" id="step-ind-4">
                                    <div class="step-circle">
                                        <span>4</span><i class="bi bi-check-lg"></i>
                                    </div>
                                    <span class="step-text">Review</span>
                                </div>
                            </div>
                        </div>

                        <!-- FORM START -->
                        <form id="multi-step-form">
                            
                            <!-- STEP 1 -->
                            <div class="form-step active-step" id="step-1">
                                <h4 class="mb-4 fw-bold"><i class="bi bi-person-lines-fill text-danger me-2"></i> Personal Information</h4>
                                
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="first_name" name="first_name" placeholder="First Name" required>
                                            <label for="first_name">First Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="last_name" name="last_name" placeholder="Last Name" required>
                                            <label for="last_name">Last Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="email" class="form-control" id="email" name="email" placeholder="Email" required>
                                            <label for="email">Email Address</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="contact_num" name="contact_num" placeholder="Mobile" required>
                                            <label for="contact_num">Mobile Number</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="date" class="form-control" id="birthdate" name="birthdate" required>
                                            <label for="birthdate">Birthdate</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <select class="form-select" id="gender" name="gender" required>
                                                <option value="" disabled selected>Select</option>
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                            </select>
                                            <label for="gender">Gender</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control" id="address" name="address" style="height: 100px" placeholder="Address" required></textarea>
                                            <label for="address">Full Home Address</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions d-flex justify-content-end mt-4">
                                    <button type="button" class="btn btn-brand btn-next" data-step="1">Next Step <i class="bi bi-arrow-right"></i></button>
                                </div>
                            </div>

                            <!-- STEP 2 -->
                            <div class="form-step" id="step-2">
                                <h4 class="mb-4 fw-bold"><i class="bi bi-briefcase text-danger me-2"></i> Position Details</h4>
                                
                                <div class="form-floating mb-3">
                                    <select class="form-select" id="position_applied" name="position_applied" required>
                                        <option value="Security Guard">Security Guard</option>
                                        <option value="Head Guard">Head Guard</option>
                                        <option value="Lady Guard">Lady Guard</option>
                                        <option value="CCTV Operator">CCTV Operator</option>
                                    </select>
                                    <label for="position_applied">Position Applied For</label>
                                </div>

                                <div class="form-actions d-flex justify-content-between mt-5">
                                    <button type="button" class="btn btn-outline-dark btn-prev" data-step="2"><i class="bi bi-arrow-left"></i> Previous</button>
                                    <button type="button" class="btn btn-brand btn-next" data-step="2">Next Step <i class="bi bi-arrow-right"></i></button>
                                </div>
                            </div>

                            <!-- STEP 3  -->
                            <div class="form-step" id="step-3">
                                <h4 class="mb-4 fw-bold"><i class="bi bi-file-earmark-arrow-up text-danger me-2"></i> Experience & Documents</h4>
                                
                                <div class="row g-3 mb-4">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="number" class="form-control" id="years_experience" name="years_experience" placeholder="Years">
                                            <label for="years_experience">Years of Experience</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="previous_employer" name="previous_employer" placeholder="Employer">
                                            <label for="previous_employer">Previous Employer</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- DRAG AND DROP ZONE 1 -->
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Attach Resume (PDF, JPG, PNG)</label>
                                    <div class="upload-card" id="drop-zone-resume">
                                        <i class="bi bi-cloud-arrow-up display-4 text-danger mb-2"></i>
                                        <p class="mb-0 text-muted" id="resume-label">Click to upload or drag & drop</p>
                                        <input type="file" id="resume" name="resume" accept=".pdf, .jpg, .png" hidden required>
                                    </div>
                                </div>

                                <!-- DRAG AND DROP ZONE 2 -->
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Valid ID (Govt Issued)</label>
                                    <div class="upload-card" id="drop-zone-id">
                                        <i class="bi bi-person-badge display-4 text-danger mb-2"></i>
                                        <p class="mb-0 text-muted" id="id-label">Click to upload or drag & drop</p>
                                        <input type="file" id="id_image" name="id_image" accept=".jpg, .png" hidden required>
                                    </div>
                                </div>
                                
                                <div class="form-actions d-flex justify-content-between mt-5">
                                    <button type="button" class="btn btn-outline-dark btn-prev" data-step="3"><i class="bi bi-arrow-left"></i> Previous</button>
                                    <button type="button" class="btn btn-brand btn-next" data-step="3">Review <i class="bi bi-eye"></i></button>
                                </div>
                            </div>

                            <!-- STEP 4 -->
                            <div class="form-step" id="step-4">
                                <h4 class="mb-4 fw-bold"><i class="bi bi-clipboard-check text-danger me-2"></i> Review Application</h4>
                                <p class="text-muted mb-4">Please verify your information before submitting.</p>
                                
                                <div class="review-grid">
                                    <div class="review-card">
                                        <h6 class="text-danger fw-bold border-bottom pb-2 mb-3">Personal Details</h6>
                                        <div class="review-details" id="review-personal-v2"></div>
                                    </div>
                                    <div class="review-card">
                                        <h6 class="text-danger fw-bold border-bottom pb-2 mb-3">Position Details</h6>
                                        <div class="review-details" id="review-job-v2"></div>
                                    </div>
                                    <div class="review-card">
                                        <h6 class="text-danger fw-bold border-bottom pb-2 mb-3">Documents</h6>
                                        <div class="review-details" id="review-docs-v2"></div>
                                    </div>
                                </div>

                                <div class="consent-section bg-light p-4 rounded-3 border mb-4">
                                    <h6 class="fw-bold mb-3"><i class="bi bi-pen-fill text-danger me-2"></i> Declarations & Consent</h6>
                                    
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="consent_truth" required>
                                        <label class="form-check-label small" for="consent_truth">
                                            I declare that all information provided is true and correct.
                                        </label>
                                    </div>

                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="consent_bg_check" required>
                                        <label class="form-check-label small" for="consent_bg_check">
                                            I consent to a thorough <strong>Background Check</strong> conducted by Aloha Security Agency.
                                        </label>
                                    </div>

                                    <div class="form-check mb-0">
                                        <input class="form-check-input" type="checkbox" id="consent_drug_test" required>
                                        <label class="form-check-label small" for="consent_drug_test">
                                            I agree to undergo mandatory <strong>Drug Testing</strong> as part of the hiring process.
                                        </label>
                                    </div>
                                </div>

                                <div class="form-actions d-flex justify-content-between mt-5">
                                    <button type="button" class="btn btn-outline-dark btn-prev" data-step="4"><i class="bi bi-arrow-left"></i> Previous</button>
                                    <!-- CHANGED type="submit" to type="button" and added ID -->
                                    <button type="button" id="btn-pre-submit" class="btn btn-brand">Proceed to Submit <i class="bi bi-arrow-right"></i></button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <!-- End Card -->

                </div>
            </div>
        </div>
    </main>

    <div id="privacy-modal" class="modal-backdrop-custom">
        <div class="modal-card-custom">
            <div class="text-center mb-3">
                <div class="icon-circle-red mx-auto mb-3">
                    <i class="bi bi-shield-lock-fill"></i>
                </div>
                <h3 class="fw-black">Data Privacy Consent</h3>
            </div>
            
            <div class="modal-body-text mb-4 text-center text-muted">
                <p class="small">
                    By clicking "Accept & Submit", you authorize <strong>Aloha Security Agency</strong> to process your personal data in accordance with the <strong>Data Privacy Act of 2012</strong>. 
                </p>
                <p class="small mb-0">
                    Your data will be used solely for recruitment, background verification, and deployment purposes. We strictly protect your information from unauthorized access.
                </p>
            </div>

            <div class="d-grid gap-2">
                <button type="button" id="btn-final-submit" class="btn btn-danger btn-lg fw-bold rounded-pill">
                    Accept & Submit Application
                </button>
                <button type="button" id="btn-modal-close" class="btn btn-light btn-sm text-muted rounded-pill">
                    Review Again
                </button>
            </div>
        </div>
    </div>

    <footer class="footer-section text-white position-relative overflow-hidden">
        <div class="container pt-5 pb-4">
            <div class="row g-4 justify-content-between">
                
                <div class="col-lg-4 col-md-12 mb-md-4">
                    <a href="#" class="d-inline-block mb-4">
                        <img src="resources/logo.png" alt="Aloha Logo" height="60">
                    </a>
                    <p class="text-white-50 mb-4 pe-lg-5" style="line-height: 1.8;">
                        Providing top-tier security solutions in Zamboanga City since 2002. Your safety is our unwavering priority.
                    </p>
                    <div class="social-links d-flex gap-2">
                        <a href="#" class="social-btn"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="social-btn"><i class="bi bi-twitter-x"></i></a>
                        <a href="#" class="social-btn"><i class="bi bi-linkedin"></i></a>
                        <a href="#" class="social-btn"><i class="bi bi-instagram"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-6">
                    <h5 class="fw-bold mb-4 text-white">Quick Links</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="status-result.html">Check Status</a></li>
                        <li><a href="application.html">Careers</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-6">
                    <h5 class="fw-bold mb-4 text-white">Services</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="#">Static Guards</a></li>
                        <li><a href="#">Mobile Patrol</a></li>
                        <li><a href="#">VIP Protection</a></li>
                        <li><a href="#">CCTV Monitoring</a></li>
                        <li><a href="#">Event Security</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-12">
                    <h5 class="fw-bold mb-4 text-white mt-4 mt-lg-0">Contact Us</h5>
                    <ul class="list-unstyled contact-info text-white-50">
                        <li class="d-flex mb-3">
                            <i class="bi bi-geo-alt-fill text-danger me-3 flex-shrink-0 mt-1"></i>
                            <span>108, Old Highway, Guiwan,<br>Zamboanga City</span>
                        </li>
                        <li class="d-flex mb-3">
                            <i class="bi bi-telephone-fill text-danger me-3 flex-shrink-0 mt-1"></i>
                            <span>(062) 991-XXXX</span>
                        </li>
                        <li class="d-flex mb-3">
                            <i class="bi bi-envelope-fill text-danger me-3 flex-shrink-0 mt-1"></i>
                            <span>info@alohasecurity.com</span>
                        </li>
                    </ul>
                </div>

            </div>
        </div>

        <!-- Copyright Bar -->
        <div class="footer-bottom py-3 mt-4 border-top border-secondary border-opacity-25">
            <div class="container">
                <div class="row align-items-center text-center text-md-start">
                    <div class="col-md-6 mb-2 mb-md-0">
                        <p class="mb-0 small text-white-50">&copy; 2026 Aloha Security Agency.</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <a href="#" class="text-white-50 small text-decoration-none me-3 hover-white">Privacy</a>
                        <a href="#" class="text-white-50 small text-decoration-none hover-white">Terms</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="js/main.js"></script>

    <!-- LOGIC SCRIPT  -->
    <script>
        // 1. DRAFT SAVING LOGIC
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('multi-step-form');
            const formFields = form.querySelectorAll('input, select, textarea');
            const DRAFT_KEY = 'aloha_application_draft';

            const saveDraft = () => {
                const formData = new FormData(form);
                const formObject = Object.fromEntries(formData.entries());
                delete formObject.resume;
                delete formObject.id_image;
                localStorage.setItem(DRAFT_KEY, JSON.stringify(formObject));
            };

            const loadDraft = () => {
                const draft = localStorage.getItem(DRAFT_KEY);
                if (draft) {
                    const data = JSON.parse(draft);
                    for (const key in data) {
                        const field = form.querySelector(`[name="${key}"]`);
                        if (field && data[key]) field.value = data[key];
                    }
                }
            };

            loadDraft();
            formFields.forEach(field => {
                if (field.type !== 'file') field.addEventListener('input', saveDraft);
            });
        });

        // 2. PROGRESS & STEPPER LOGIC (With Checkmarks)
        const formInputs = document.querySelectorAll('input, select, textarea');
        const progressBar = document.getElementById('top-progress-bar');
        
        function updateProgress() {
            const activeStepDiv = document.querySelector('.form-step.active-step');
            if(!activeStepDiv) return;
            
            const currentStepNum = parseInt(activeStepDiv.id.replace('step-', ''));
            
            //  Top Bar Width
            const totalSteps = 4;
            const progressPercent = ((currentStepNum - 1) / (totalSteps - 1)) * 100;
            progressBar.style.width = `${progressPercent}%`;
        
            const stepperLineFill = document.getElementById('stepper-line-fill');
            if (stepperLineFill) {
                stepperLineFill.style.width = `${progressPercent}%`;
            }

            //  Stepper UI (Active & Checkmarks)
            document.querySelectorAll('.step').forEach((step, index) => {
                const stepNum = index + 1;
                
                step.classList.remove('active', 'completed');

                if (stepNum === currentStepNum) {
                    step.classList.add('active'); 
                } else if (stepNum < currentStepNum) {
                    step.classList.add('completed'); 
                }
            });
            
            document.getElementById('current-step-label').innerText = currentStepNum;
        }

        // 3. NAVIGATION BUTTONS
        document.querySelectorAll('.btn-next').forEach(btn => {
            btn.addEventListener('click', () => {
                const currentStep = btn.closest('.form-step');
                const inputs = currentStep.querySelectorAll('input[required], select[required], textarea[required]');
                let valid = true;
                inputs.forEach(input => {
                    if (!input.checkValidity()) {
                        input.reportValidity();
                        valid = false;
                    }
                });

                if(valid) {
                    const nextStepId = `step-${parseInt(btn.getAttribute('data-step')) + 1}`;
                    const nextStep = document.getElementById(nextStepId);
                    
                    if (nextStep) { 
                        currentStep.classList.remove('active-step');
                        nextStep.classList.add('active-step');
                        updateProgress();
                        window.scrollTo(0, 0);
                    }
                }
            });
        });

        document.querySelectorAll('.btn-prev').forEach(btn => {
            btn.addEventListener('click', () => {
                const currentStep = btn.closest('.form-step');
                const prevStepId = `step-${parseInt(btn.getAttribute('data-step')) - 1}`;
                const prevStep = document.getElementById(prevStepId);
                
                if (prevStep) { 
                    currentStep.classList.remove('active-step');
                    prevStep.classList.add('active-step');
                    updateProgress();
                    window.scrollTo(0, 0);
                }
            });
        });

        // 4. REVIEW SECTION POPULATION
        const nextToReviewBtn = document.querySelector('.btn-next[data-step="3"]');
        if(nextToReviewBtn) {
            nextToReviewBtn.addEventListener('click', () => {
                const formData = new FormData(document.getElementById('multi-step-form'));
                
                document.getElementById('review-personal-v2').innerHTML = `
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Full Name</span><span class="fw-bold">${formData.get('first_name')} ${formData.get('last_name')}</span></div>
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Email</span><span class="fw-bold">${formData.get('email')}</span></div>
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Mobile</span><span class="fw-bold">${formData.get('contact_num')}</span></div>
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Address</span><span class="fw-bold text-end">${formData.get('address')}</span></div>
                `;

                document.getElementById('review-job-v2').innerHTML = `
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Position</span><span class="fw-bold">${formData.get('position_applied')}</span></div>
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Experience</span><span class="fw-bold">${formData.get('years_experience') || '0'} Years</span></div>
                `;

                const resumeName = document.getElementById('resume').files[0]?.name || "Not attached";
                const idName = document.getElementById('id_image').files[0]?.name || "Not attached";
                
                document.getElementById('review-docs-v2').innerHTML = `
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Resume</span><span class="fw-bold text-success"><i class="bi bi-check-circle"></i> ${resumeName}</span></div>
                    <div class="d-flex justify-content-between border-bottom py-2"><span class="text-muted">Valid ID</span><span class="fw-bold text-success"><i class="bi bi-check-circle"></i> ${idName}</span></div>
                `;
            });
        }

        // 5. DRAG AND DROP & CLICK UPLOAD LOGIC
        const uploadCards = document.querySelectorAll('.upload-card');

        uploadCards.forEach(card => {
            const input = card.querySelector('input[type="file"]');
            const label = card.querySelector('p.text-muted');

            card.addEventListener('click', () => input.click());

            ['dragenter', 'dragover'].forEach(eventName => {
                card.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    card.classList.add('drag-over');
                });
            });

            ['dragleave', 'drop'].forEach(eventName => {
                card.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    card.classList.remove('drag-over');
                });
            });

            card.addEventListener('drop', (e) => {
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    input.files = files;
                    label.textContent = files[0].name;
                    card.style.borderColor = 'var(--brand-black)'; // Indicate file dropped
                }
            });

            input.addEventListener('change', (e) => {
                if (input.files.length > 0) {
                    label.textContent = input.files[0].name;
                    card.style.borderColor = 'var(--brand-black)'; // Indicate file selected
                }
            });
        });

        // Initial progress update on page load
        updateProgress();
    </script>
</body>
</html>

